"use strict";(self.webpackChunknaghilvari=self.webpackChunknaghilvari||[]).push([[154],{3154:(e,a,t)=>{t.r(a),t.d(a,{default:()=>E});var n=t(9379),i=t(5043),r=t(6446),o=t(3336),s=t(5865),c=t(5795),d=t(4194),l=t(1906),p=t(9650),u=t(1806),h=t(4882),m=t(8076),g=t(2420),x=t(3460),A=t(7392),j=t(35),f=t(4219),y=t(5316),v=t(2143),b=t(4605),C=t(3217),S=t(1787),k=t(9347),w=t(3216),P=t(3471),W=t(3159),D=t(7412),_=t(2994),I=t(4323),T=t(579);const F={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:4000",E=()=>{const[e,a]=(0,i.useState)(""),[t,E]=(0,i.useState)(""),[N,L]=(0,i.useState)(""),[O,U]=(0,i.useState)(!1),[R,z]=(0,i.useState)([]),[B,q]=(0,i.useState)(!1),[H,K]=(0,i.useState)(!1),[Y,J]=(0,i.useState)(!1),[V,Z]=(0,i.useState)(null),[G,M]=(0,i.useState)({name:"",description:"",price:"",artist:"",dimensions:"",year:"",category:"paintings",featured:!1,image:null}),[Q,X]=(0,i.useState)(""),$=(0,w.Zp)();(0,i.useEffect)((()=>{localStorage.getItem("admin_token")&&U(!0)}),[]),(0,i.useEffect)((()=>{O&&ee()}),[O]);const ee=async()=>{q(!0);try{const e=await fetch("".concat(F,"/api/products")),a=await e.json();z(a)}catch(e){L("Failed to fetch products")}q(!1)},ae=async a=>{a.preventDefault(),L("");try{const a=await fetch("".concat(F,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!a.ok){const e=await a.json();return void L(e.message||"Login failed")}const n=await a.json();localStorage.setItem("admin_token",n.token),U(!0),L(""),$("/admin")}catch(n){L("Network error")}},te=()=>K(!1),ne=()=>J(!1),ie=e=>{const{name:a,value:t,files:i,type:r,checked:o}=e.target;M("image"===a&&i?e=>(0,n.A)((0,n.A)({},e),{},{image:i[0]}):"checkbox"===r?e=>(0,n.A)((0,n.A)({},e),{},{[a]:o}):e=>(0,n.A)((0,n.A)({},e),{},{[a]:t}))};return O?(0,T.jsx)(r.A,{sx:{position:"relative",minHeight:"100vh",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:8,paddingBottom:8,backgroundImage:"url(".concat(I,")"),backgroundSize:"cover",backgroundPosition:"center","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(30, 30, 30, 0.7)",zIndex:0}},children:(0,T.jsxs)(o.A,{elevation:6,sx:{p:{xs:2,sm:4},maxWidth:900,width:"100%",borderRadius:5,boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.25)",background:"rgba(255,255,255,0.92)",position:"relative",zIndex:1},children:[(0,T.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,T.jsx)(s.A,{variant:"h4",children:"Admin Dashboard"}),(0,T.jsx)(l.A,{variant:"outlined",color:"secondary",onClick:()=>{localStorage.removeItem("admin_token"),U(!1),a(""),E("")},children:"Logout"})]}),(0,T.jsx)(l.A,{variant:"contained",color:"primary",onClick:()=>{M({name:"",description:"",price:"",artist:"",dimensions:"",year:"",category:"paintings",featured:!1,image:null}),X(""),K(!0)},sx:{mb:2},children:"Add Product"}),B?(0,T.jsx)(s.A,{children:"Loading products..."}):(0,T.jsx)(p.A,{component:o.A,sx:{mb:2},children:(0,T.jsxs)(u.A,{children:[(0,T.jsx)(h.A,{children:(0,T.jsxs)(m.A,{children:[(0,T.jsx)(g.A,{children:"Name"}),(0,T.jsx)(g.A,{children:"Description"}),(0,T.jsx)(g.A,{children:"Artist"}),(0,T.jsx)(g.A,{children:"Dimensions"}),(0,T.jsx)(g.A,{children:"Year"}),(0,T.jsx)(g.A,{children:"Price"}),(0,T.jsx)(g.A,{children:"Category"}),(0,T.jsx)(g.A,{children:"Featured"}),(0,T.jsx)(g.A,{children:"Image"}),(0,T.jsx)(g.A,{align:"right",children:"Actions"})]})}),(0,T.jsx)(x.A,{children:R.map((e=>(0,T.jsxs)(m.A,{children:[(0,T.jsx)(g.A,{children:e.name}),(0,T.jsx)(g.A,{children:e.description}),(0,T.jsx)(g.A,{children:e.artist||"-"}),(0,T.jsx)(g.A,{children:e.dimensions||"-"}),(0,T.jsx)(g.A,{children:e.year||"-"}),(0,T.jsxs)(g.A,{children:["\u20bc",e.price]}),(0,T.jsx)(g.A,{children:e.category||"-"}),(0,T.jsx)(g.A,{children:(0,T.jsx)(A.A,{onClick:()=>(async e=>{const a=localStorage.getItem("admin_token");if(a)try{if(!(await fetch("".concat(F,"/api/products/").concat(e._id),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:(()=>{const a=new FormData;return a.append("name",e.name),a.append("description",e.description),a.append("price",String(e.price)),a.append("artist",e.artist||""),a.append("dimensions",e.dimensions||""),a.append("year",e.year?String(e.year):""),a.append("category",e.category||"paintings"),a.append("featured",String(!e.featured)),a})()})).ok)return void alert("Failed to update featured status");ee()}catch(t){alert("Network error")}})(e),color:e.featured?"warning":"default",children:e.featured?(0,T.jsx)(D.A,{}):(0,T.jsx)(_.A,{})})}),(0,T.jsx)(g.A,{children:e.imageUrl&&(0,T.jsx)("img",{src:"".concat(F).concat(e.imageUrl),alt:e.name,style:{width:60,height:60,objectFit:"cover",borderRadius:4}})}),(0,T.jsxs)(g.A,{align:"right",children:[(0,T.jsx)(A.A,{onClick:()=>(e=>{Z(e),M({name:e.name,description:e.description,price:String(e.price),artist:e.artist||"",dimensions:e.dimensions||"",year:e.year?String(e.year):"",category:e.category||"paintings",featured:e.featured||!1,image:null}),X(""),J(!0)})(e),children:(0,T.jsx)(W.A,{})}),(0,T.jsx)(A.A,{color:"error",onClick:()=>(async e=>{if(!window.confirm("Delete this product?"))return;const a=localStorage.getItem("admin_token");if(a)try{if(!(await fetch("".concat(F,"/api/products/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}})).ok)return void alert("Failed to delete product");ee()}catch(t){alert("Network error")}})(e._id),children:(0,T.jsx)(P.A,{})})]})]},e._id)))})]})}),(0,T.jsxs)(j.A,{open:H,onClose:te,children:[(0,T.jsx)(f.A,{children:"Add Product"}),(0,T.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),X("");const a=localStorage.getItem("admin_token");if(!a)return;const t=new FormData;t.append("name",G.name),t.append("description",G.description),t.append("price",G.price),t.append("artist",G.artist),t.append("dimensions",G.dimensions),t.append("year",G.year),t.append("category",G.category),t.append("featured",String(G.featured)),G.image&&t.append("image",G.image);try{if(!(await fetch("".concat(F,"/api/products"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:t})).ok)return void X("Failed to add product");te(),ee()}catch(n){X("Network error")}},encType:"multipart/form-data",children:[(0,T.jsxs)(y.A,{sx:{display:"flex",flexDirection:"column",gap:2,minWidth:350},children:[(0,T.jsx)(c.A,{label:"Name",name:"name",value:G.name,onChange:ie,required:!0,fullWidth:!0}),(0,T.jsx)(c.A,{label:"Description",name:"description",value:G.description,onChange:ie,fullWidth:!0}),(0,T.jsx)(c.A,{label:"Artist",name:"artist",value:G.artist,onChange:ie,fullWidth:!0}),(0,T.jsx)(c.A,{label:"Dimensions",name:"dimensions",value:G.dimensions,onChange:ie,fullWidth:!0}),(0,T.jsx)(c.A,{label:"Year",name:"year",value:G.year,onChange:ie,fullWidth:!0,type:"number"}),(0,T.jsxs)(c.A,{label:"Category",name:"category",value:G.category,onChange:ie,select:!0,fullWidth:!0,required:!0,margin:"normal",children:[(0,T.jsx)(v.A,{value:"paintings",children:"Paintings"}),(0,T.jsx)(v.A,{value:"sculptures",children:"Sculptures"}),(0,T.jsx)(v.A,{value:"ceramics",children:"Ceramics"})]}),(0,T.jsx)(b.A,{control:(0,T.jsx)(C.A,{checked:G.featured,onChange:ie,name:"featured",color:"primary"}),label:"Featured Product"}),(0,T.jsx)(c.A,{label:"Price",name:"price",value:G.price,onChange:ie,required:!0,fullWidth:!0,type:"number",InputProps:{startAdornment:(0,T.jsx)(S.A,{position:"start",children:"\u20bc"})}}),(0,T.jsxs)(l.A,{variant:"contained",component:"label",children:["Upload Image",(0,T.jsx)("input",{type:"file",name:"image",accept:"image/*",hidden:!0,onChange:ie})]}),Q&&(0,T.jsx)(d.A,{severity:"error",children:Q})]}),(0,T.jsxs)(k.A,{children:[(0,T.jsx)(l.A,{onClick:te,children:"Cancel"}),(0,T.jsx)(l.A,{type:"submit",variant:"contained",children:"Add"})]})]})]}),(0,T.jsxs)(j.A,{open:Y,onClose:ne,children:[(0,T.jsx)(f.A,{children:"Edit Product"}),(0,T.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),X("");const a=localStorage.getItem("admin_token");if(!a||!V)return;const t=new FormData;t.append("name",G.name),t.append("description",G.description),t.append("price",G.price),t.append("artist",G.artist),t.append("dimensions",G.dimensions),t.append("year",G.year),t.append("category",G.category),t.append("featured",String(G.featured)),G.image&&t.append("image",G.image);try{if(!(await fetch("".concat(F,"/api/products/").concat(V._id),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:t})).ok)return void X("Failed to update product");ne(),ee()}catch(n){X("Network error")}},encType:"multipart/form-data",children:[(0,T.jsxs)(y.A,{sx:{display:"flex",flexDirection:"column",gap:2,minWidth:350},children:[(0,T.jsx)(c.A,{label:"Name",name:"name",value:G.name,onChange:ie,required:!0,fullWidth:!0}),(0,T.jsx)(c.A,{label:"Description",name:"description",value:G.description,onChange:ie,fullWidth:!0}),(0,T.jsx)(c.A,{label:"Artist",name:"artist",value:G.artist,onChange:ie,fullWidth:!0}),(0,T.jsx)(c.A,{label:"Dimensions",name:"dimensions",value:G.dimensions,onChange:ie,fullWidth:!0}),(0,T.jsx)(c.A,{label:"Year",name:"year",value:G.year,onChange:ie,fullWidth:!0,type:"number"}),(0,T.jsxs)(c.A,{label:"Category",name:"category",value:G.category,onChange:ie,select:!0,fullWidth:!0,required:!0,margin:"normal",children:[(0,T.jsx)(v.A,{value:"paintings",children:"Paintings"}),(0,T.jsx)(v.A,{value:"sculptures",children:"Sculptures"}),(0,T.jsx)(v.A,{value:"digital-art",children:"Digital Art"}),(0,T.jsx)(v.A,{value:"photography",children:"Photography"}),(0,T.jsx)(v.A,{value:"ceramics",children:"Ceramics"})]}),(0,T.jsx)(b.A,{control:(0,T.jsx)(C.A,{checked:G.featured,onChange:ie,name:"featured",color:"primary"}),label:"Featured Product"}),(0,T.jsx)(c.A,{label:"Price",name:"price",value:G.price,onChange:ie,required:!0,fullWidth:!0,type:"number",InputProps:{startAdornment:(0,T.jsx)(S.A,{position:"start",children:"\u20bc"})}}),(0,T.jsxs)(l.A,{variant:"contained",component:"label",children:["Upload New Image",(0,T.jsx)("input",{type:"file",name:"image",accept:"image/*",hidden:!0,onChange:ie})]}),Q&&(0,T.jsx)(d.A,{severity:"error",children:Q})]}),(0,T.jsxs)(k.A,{children:[(0,T.jsx)(l.A,{onClick:ne,children:"Cancel"}),(0,T.jsx)(l.A,{type:"submit",variant:"contained",children:"Save"})]})]})]})]})}):(0,T.jsx)(r.A,{sx:{minHeight:"70vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default"},children:(0,T.jsxs)(o.A,{elevation:3,sx:{p:4,maxWidth:400,width:"100%",textAlign:"center"},children:[(0,T.jsx)(s.A,{variant:"h5",gutterBottom:!0,children:"Admin Login"}),(0,T.jsxs)("form",{onSubmit:ae,style:{display:"flex",flexDirection:"column",gap:16},children:[(0,T.jsx)(c.A,{label:"Admin Name",value:e,onChange:e=>a(e.target.value),fullWidth:!0,autoFocus:!0,autoComplete:"username"}),(0,T.jsx)(c.A,{label:"Password",type:"password",value:t,onChange:e=>E(e.target.value),fullWidth:!0,autoComplete:"current-password"}),N&&(0,T.jsx)(d.A,{severity:"error",children:N}),(0,T.jsx)(l.A,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2},children:"Login"})]})]})})}},4323:(e,a,t)=>{e.exports=t.p+"static/media/hero.20f2a6e618fd5c670154.jpg"}}]);
//# sourceMappingURL=154.64076479.chunk.js.map